{% extends "Housekeeping/base.html" %}
{% block title %}Home{% endblock %}
{% block body %}
<div class="col-12 col-md-8 col-lg-9 col-xl-10 pl-lg-4">
    <div class="row">
      {% if type == 'chatlogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Chat Logs</h5>
						<h6 class="card-subtitle text-muted">Chat Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="chatLogs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>Room</th>
								<th>Data</th>
								<th>Timestamp</th>
							</tr>
							</thead>
							<tbody>
								  {% for chats in data.user.chatlogs %}
                    {% set stamp = chats.timestamp|slice(0, 10) %}
                    <tr>
                        <td>{{chats.id}}</td>
                        <td>{{chats.room}}</td>
                        <td>{{chats.message}}</td>
                        <td>{{stamp|time_diff}}</td>
                    </tr>
                  {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
      <script>
      document.addEventListener("DOMContentLoaded", function(event) {
          $('#chatLogs').DataTable({
              order: [[ 0, "desc" ]],
              lengthChange: 1,
              responsive: true
          });
      });
      </script>
      {% endif %}
      {% if type == 'mailogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Mail Logs</h5>
						<h6 class="card-subtitle text-muted">Mail Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="logs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>New mail</th>
								<th>Old mail</th>
								<th>Timestamp</th>
							</tr>
							</thead>

							<tbody>
							
							</tbody>
						</table>
					</div>
				</div>
			</div>
      {% endif %}
      {% if type == 'messengerlogs' %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Messenger Logs</h5>
						<h6 class="card-subtitle text-muted">Messenger Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="messengerLogs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>Reciever</th>
								<th>Data</th>
								<th>Timestamp</th>
							</tr>
							</thead>
							<tbody>
								  {% for chats in data.user.messengerlogs %}
                    {% set stamp = chats.timestamp|slice(0, 10) %}
                    <tr>
                        <td>{{chats.id}}</td>
                      <td data-toggle="modal" data-target="#actionModal" data-id="{{clones.username}}"><a href="#">{{chats.to_user}}</a></td>
                        <td>{{chats.message}}</td>
                        <td>{{stamp|time_diff}}</td>
                    </tr>
                  {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
      <script>
      document.addEventListener("DOMContentLoaded", function(event) {
          $('#messengerLogs').DataTable({
              order: [[ 0, "desc" ]],
              lengthChange: 1,
              responsive: true
          });
      });
      </script>
      {% endif %}
      {% if type == 'mailogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Mail Logs</h5>
						<h6 class="card-subtitle text-muted">Mail Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="logs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>New mail</th>
								<th>Old mail</th>
								<th>Timestamp</th>
							</tr>
							</thead>

							<tbody>
							
							</tbody>
						</table>
					</div>
				</div>
			</div>
      {% endif %}
      {% if type == 'purchasedlogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Purchase Logs</h5>
						<h6 class="card-subtitle text-muted">Purchase Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="logs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>Data</th>
								<th>Timestamp</th>
							</tr>
							</thead>

							<tbody>
				
							</tbody>
						</table>
					</div>
				</div>
			</div>
      {% endif %}
      {% if type == 'namelogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Username Logs</h5>
						<h6 class="card-subtitle text-muted">Username Logs of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="nameChanges" class="table" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>New name</th>
								<th>Old name</th>
								<th>Timestamp</th>
							</tr>
							</thead>
    
							<tbody>
                  {% for user in data.usernameChanges %}
                   <tr>
                       <td>{{user.id}}</td>
                       <td>{{user.new_name}}</td> 
                       <td>{{user.old_name}}</td> 
                       <td>{{user.timestamp|time_diff}}</td> 
                    </tr>
                  {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
      <script>
      document.addEventListener("DOMContentLoaded", function(event) {
      $('#nameChanges').DataTable({
          order: [[ 0, "asc" ]],
          lengthChange: 1,
          responsive: true
      });
      });
      </script>
      {% endif %}
      {% if type == 'roomlogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Rooms</h5>
						<h6 class="card-subtitle text-muted">Rooms of {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="logs" class="table" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>Name</th>
								<th>Description</th>
								<th>Action</th>
							</tr>
							</thead>
							<tbody>
							    {% for room in data.rooms %}
                      <tr>
                        <td>{{room.id}}</td>
                        <td>{{room.caption}}</td>
                        <td>{{room.description}}</td>
                        <td></td>
                      </tr>
                  {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
      <script>
      document.addEventListener("DOMContentLoaded", function(event) {
      $('#rooms').DataTable({
          order: [[ 0, "asc" ]],
          lengthChange: 1,
          responsive: true
      });
      });
      </script>
      {% endif %}
      {% if type == 'purchasedlogs' or type is empty %}
			<div class="col-md-12">
				<div class="card card-default widget">
					<div class="card-header">
						<h5 class="card-title">Purchased Items</h5>
						<h6 class="card-subtitle text-muted">Item they bought by {{data.user.username}}</h6>
					</div>
					<div class="card-body">
						<table id="logs" class="table" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#itemid</th>
								<th>Item</th>
								<th>Object</th>
							</tr>
							</thead>
							<tbody>
                  {% for items in data.shopItems %}
                      <tr>
                          <td>{{items.id}}</td>
                          <td>{{items.item}}</td>
                          <td>{{items.objectname}}</td>
                      </tr>
                  {% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
      <script>
      document.addEventListener("DOMContentLoaded", function(event) {
      $('#purchasedItems').DataTable({
          order: [[ 0, "desc" ]],
          lengthChange: 1,
          responsive: true
      });
      });
      </script>
      {% endif %}
      {% if type == 'userinfo' or type is empty %}
            <div class="col-md-12">
                
                <div class="card card-default widget animated" style="animation-delay: 0.34s;">
                    <div class="card-header">
                        <h5 class="card-title">User Info</h5>
                        <h6 class="card-subtitle text-muted">User Info of {{data.user.username}}</h6>
                    </divu
                    <div class="card-body">
                        <form method="post" action="/housekeeping/control/user/{{data.user.username}}/userinfo">
                            <div class="form-group row">
                                <label for="example-text-input" class="col-2 col-form-label">Username</label>
                                <div class="col-10">
                                    <input class="form-control" type="text" name="username" value="{{data.user.username}}" id="example-text-input" disabled>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">E-mail</label>
                                <div class="col-10">
                                    <input class="form-control" type="email" name="email" value="{{data.user.mail}}" id="example-email-input" required>
                                </div>
                            </div>
                           {% if data.hotelranks is defined %}
                            <div class="form-group row">
                                <label for="example-number-input" class="col-2 col-form-label">Rank</label>
                                <div class="col-10">
                                    <select class="form-control" name="rank" required>
                                        {% for ranks in data.hotelranks %}
                                            <option value="{{ranks.id}}" {% if ranks.id == data.user.rank %}selected{% endif %}>{{ranks.id}} - {{ranks.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
							              {% endif %}
                            <div class="form-group row">
                                <label class="col-2 col-form-label">Functie</label>
                                <div class="col-10">
                                    <input class="form-control" type="text" name="roledescription" value="{{data.user.role}}" >
                                </div>
                            </div>
                            {% if data.user.sadmin == true %}
                            <div class="form-group row">
                                <label for="example-number-input" class="col-2 col-form-label">Super admin </label>
                                <div class="col-10">
                                    <input type="checkbox" name="sadmin" value="1" {% if data.user.uadmin == true %}checked{% endif %}>
                                </div>
                            </div>
                            {% endif %}
                            <div class="form-group row">
                                <label for="example-number-input" class="col-2 col-form-label">Land</label>
                                <div class="col-10">
                                    <select class="form-control" name="country" required>
                                            <option value="nl" selected>Nederlands</option>
                                            <option value="be">Belgisch</option>
                                    </select>
                                </div>
                            </div>
							              <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Pin Code</label>
                                <div class="col-10">
                                    <input class="form-control" type="password" name="pincode" value="{{data.user.pincode}}" maxlength="6" id="example-email-input">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Last/Reg IP</label>
                                <div class="col-10">
                                    <input type="text" class="form-control" value="{{data.user.ip_reg}} / {{data.user.ip_last}}" id="example-email-input" disabled>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Last Visit</label>
                                <div class="col-10">
                                    <input type="text" class="form-control" value="{{data.user.last_online|time_diff}}" id="example-email-input" disabled>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Motto</label>
                                <div class="col-10">
                                    <input type="text" class="form-control" name="motto" value="{{data.user.motto}}" id="example-email-input">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-number-input" class="col-2 col-form-label">Credits</label>
                                <div class="col-2">
                                    <input class="form-control" type="number" name="credits" value="{{data.user.credits}}" id="example-number-input" required>
                                </div>

                                <label for="example-number-input" class="col-2 col-form-label">Diamonds</label>
                                <div class="col-2">
                                    <input class="form-control" type="number" name="diamonds" value="{{data.user.vip_points}}" id="example-number-input" required>
                                </div>

                                <label for="example-number-input" class="col-2 col-form-label">Bel-Credits / Jetons</label>
                                <div class="col-2">
                                    <input class="form-control" type="number" name="bcredits" value="{{data.user.gotw_points}}" id="example-number-input" required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Bans</label>
                                <div class="col-2">
                                    <input type="text" class="form-control" value="0" id="example-email-input" disabled>
                                </div>

                                <label for="example-email-input" class="col-2 col-form-label">Cautions</label>
                                <div class="col-2">
                                    <input type="text" class="form-control" value="0" id="example-email-input" disabled>
                                </div>

                                <label for="example-email-input" class="col-2 col-form-label">Abuse Tickets</label>
                                <div class="col-2">
                                    <input type="text" class="form-control" value="0" id="example-email-input" disabled>
                                </div>

                                <div class="col-12">
                                    <hr>
                                    <button type="submit" class="btn btn-primary mb-2">Save</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

			<div class="col-md-12">
				<div class="card card-default widget">
                    <div class="card-header">
                        <h5 class="card-title">Clones</h5>
                        <h6 class="card-subtitle text-muted">Clones of {{data.user.username}}</h6>
                    </div>
					<div class="card-body">
						<table id="cloneLogs" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
							<tr>
								<th>#</th>
								<th>Username</th>
								<th>Last/Reg IP</th>
								<th>Lastvisit</th>
							</tr>
							</thead>
							<tbody>
							    {% for clones in data.duplicateUsers %}
                      {% if clones.username != data.user.username  %}
                      <tr>
                        <td>{{clones.id}}</td>
                        <td data-toggle="modal" data-target="#actionModal" data-id="{{clones.username}}"><a href="#">{{clones.username}}</a></td>
                        <td>{{clones.last_ip}} / {{clones.reg_ip}}</td>
                        <td>{{clones.lastvisit|time_diff}}</td>
                      </tr>
                      {% endif %}
                  {% endfor %}
							</tbody>
						</table>
					</div>
					
					<script>
						document.addEventListener("DOMContentLoaded", function(event) {
							$('#cloneLogs').DataTable({
								order: [[ 0, "asc" ]],
								lengthChange: 1,
								responsive: true
							});
						});
					</script>
				</div>
			</div>
			{% endif %}
        {% include 'Housekeeping/Management/tools.html' %}
        </div>
	</div>
{% endblock %}